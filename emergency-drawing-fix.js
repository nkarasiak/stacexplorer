/**\n * Emergency Fix for Drawing Fullscreen Issue\n * Simple override that completely blocks fullscreen during drawing\n */\n\n// Run this in browser console as a quick test/fix:\nfunction emergencyFixDrawing() {\n    console.log('\ud83d\ude91 EMERGENCY FIX: Blocking fullscreen AI search during drawing');\n    \n    const aiSearch = window.stacExplorer?.aiSmartSearch;\n    const mapManager = window.stacExplorer?.mapManager;\n    const inlineManager = window.stacExplorer?.inlineDropdownManager;\n    \n    if (!aiSearch || !mapManager) {\n        console.error('\u274c Required components not found');\n        return;\n    }\n    \n    // Store original methods\n    const originalShowMinimalist = aiSearch.showMinimalistSearch;\n    const originalStartDrawing = mapManager.startDrawingBbox;\n    \n    let drawingInProgress = false;\n    \n    // Override drawing method\n    mapManager.startDrawingBbox = function(callback) {\n        console.log('\ud83c\udfaf EMERGENCY: Drawing started - AI search BLOCKED');\n        \n        drawingInProgress = true;\n        \n        // Block AI search completely\n        aiSearch.showMinimalistSearch = () => {\n            console.log('\ud83d\udeab EMERGENCY BLOCK: AI search prevented');\n            return Promise.resolve();\n        };\n        \n        // Call original with our callback wrapper\n        return originalStartDrawing.call(this, (bbox) => {\n            console.log('\ud83d\udccd EMERGENCY: Drawing done - updating inline');\n            \n            // Update sidebar directly\n            const locationSummary = document.querySelector('[data-field=\"location\"] .search-summary-value');\n            if (locationSummary) {\n                locationSummary.textContent = 'MAP SELECTION';\n            }\n            \n            // Restore AI search after delay\n            setTimeout(() => {\n                aiSearch.showMinimalistSearch = originalShowMinimalist;\n                drawingInProgress = false;\n                console.log('\u2705 EMERGENCY: AI search restored');\n            }, 2000);\n            \n            // Call original callback\n            if (callback) callback(bbox);\n        });\n    };\n    \n    console.log('\u2705 EMERGENCY FIX APPLIED - Drawing should now work inline');\n}\n\n// Auto-apply the fix\nsetTimeout(() => {\n    if (window.stacExplorer) {\n        emergencyFixDrawing();\n    }\n}, 2000);\n\n// Export for manual use\nwindow.emergencyFixDrawing = emergencyFixDrawing;\n\nconsole.log('\ud83d\ude91 Emergency drawing fix loaded - run emergencyFixDrawing() if needed');\n